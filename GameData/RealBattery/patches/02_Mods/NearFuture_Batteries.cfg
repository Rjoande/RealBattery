@PART[battery-rad-125]:NEEDS[NearFutureElectrical] //B-800
{
    RBbaseVolume = #$/RESOURCE[ElectricCharge]/maxAmount$
    @RBbaseVolume *= 0.3

    @mass = 0
    @cost = 0
    
    @RESOURCE[ElectricCharge]
    {
        @maxAmount = #$../RBbaseVolume$
        @maxAmount *= 0.3
        @amount = #$../RBbaseVolume$
        @amount *= 0.3
    }
    RESOURCE
    {
        name = StoredCharge
        maxAmount = #$../RBbaseVolume$
        @maxAmount *= 0.02
        amount = #$../RBbaseVolume$
        @amount *= 0.02
    }

    MODULE
    {
        name = RealBattery
        BatteryTypeDisplayName = #LOC_RB_short_PbAc
        Crate = 0.2
        HighEClevel = 0.95
        LowEClevel = 0.90
    }

    MODULE
    {
        name = ModuleB9PartSwitch
        moduleID = batterySwitch
        switcherDescription = #LOC_RB_batterySwitcherDescription
		switcherDescriptionPlural = #LOC_RB_batterySwitcherDescriptionPlural
        baseVolume = #$../RBbaseVolume$

        SUBTYPE
        {
            name = PbAc
            title = #LOC_RB_title_PbAc
            descriptionSummary = #LOC_RB_descSum_PbAc
            descriptionDetail = #LOC_RB_descDet_PbAc
            tankType = PbAc
            defaultSubtypePriority = 3

            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_short_PbAc

                    FixedOutput = false
                    KeepWarm = false
                    SelfRunaway = false

                    HighEClevel = 0.95
                    Crate = 0.2

                    SelfDischargeRate = 0.045
                    CycleDurability = 75
                    EvaRefurbishEnabled = true
                    SparePartsPerKWh = 35

                    ThermalLoss = 0.3
                    TempOverheat = 390
                    TempRunaway = 490
                    RunawayHeatFactor = 0.8

                    ChargeEfficiencyCurve
                    {
                        key = 0.0 0.55
                        key = 0.3 0.65
                        key = 0.5 0.70
                        key = 0.8 0.60
                        key = 1.0 0.50
                    }
                }
            }
        }

        SUBTYPE
        {
            name = NiCd
            title = #LOC_RB_title_NiCd
            descriptionSummary = #LOC_RB_descSum_NiCd
            descriptionDetail = #LOC_RB_descDet_NiCd
            tankType = NiCd
            upgradeRequired = RB_UpgradeNiCd
            defaultSubtypePriority = 4
            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_short_NiCd

                    FixedOutput = false
                    KeepWarm = false
                    SelfRunaway = false

                    HighEClevel = 0.95
                    Crate = 0.5

                    SelfDischargeRate = 0.03
                    CycleDurability = 500
                    EvaRefurbishEnabled = true
                    SparePartsPerKWh = 14

                    ThermalLoss = 0.2
                    TempOverheat = 340
                    TempRunaway = 440
                    RunawayHeatFactor = 1

                    ChargeEfficiencyCurve
                    {
                        key = 0.0 0.70
                        key = 0.5 0.75
                        key = 0.9 0.80
                        key = 1.0 0.65
                    }
                }
            }
        }

        SUBTYPE
        {
            name = AgZn
            title = #LOC_RB_title_AgZn
            descriptionSummary = #LOC_RB_descSum_AgZn
            descriptionDetail = #LOC_RB_descDet_AgZn
            tankType = AgZn
            upgradeRequired = RB_UpgradeAgZn
            defaultSubtypePriority = 6
            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_short_AgZn

                    FixedOutput = false
                    KeepWarm = false
                    SelfRunaway = false

                    HighEClevel = 0.95
                    Crate = 1.5

                    SelfDischargeRate = 0.025
                    CycleDurability = 50
                    EvaRefurbishEnabled = true
                    SparePartsPerKWh = 5

                    ThermalLoss = 0.3
                    TempOverheat = 370
                    TempRunaway = 470
                    RunawayHeatFactor = 1.6

                    ChargeEfficiencyCurve
                    {
                        key = 0.0 0.60
                        key = 0.3 0.75
                        key = 0.6 0.85
                        key = 0.85 0.70
                        key = 1.0 0.50
                    }
                }
            }
        }

        SUBTYPE
        {
            name = RBZebra
            title = #LOC_RB_title_Zebra
            descriptionSummary = #LOC_RB_descSum_Zebra
            descriptionDetail = #LOC_RB_descDet_Zebra
            tankType = RBZebra
            upgradeRequired = RB_UpgradeZebra
            defaultSubtypePriority = 8
            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_short_Zebra

                    FixedOutput = false
                    KeepWarm = true
                    SelfRunaway = false
                    
                    HighEClevel = 0.95
                    Crate = 1

                    SelfDischargeRate = 0
                    CycleDurability = 4500
                    EvaRefurbishEnabled = true
                    SparePartsPerKWh = 6

                    ThermalLoss = 0.1
                    TempOverheat = 1000
                    TempRunaway = 9999
                    RunawayHeatFactor = 0

                    ChargeEfficiencyCurve
                    {
                            key = 0.0 0.90
                            key = 0.3 0.95
                            key = 0.5 0.99
                            key = 0.8 0.95
                            key = 1.0 0.90
                    }
                }
            }
        }

        SUBTYPE
        {
            name = Li_ion
            title = #LOC_RB_title_Li_ion
            descriptionSummary = #LOC_RB_descSum_Li_ion
            descriptionDetail = #LOC_RB_descDet_Li_ion
            tankType = Li_ion
            upgradeRequired = RB_UpgradeLiIon
            defaultSubtypePriority = 9
            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_short_Li_ion

                    FixedOutput = false
                    KeepWarm = false
                    SelfRunaway = false

                    HighEClevel = 0.95
                    Crate = 1

                    SelfDischargeRate = 0.01
                    CycleDurability = 1000
                    EvaRefurbishEnabled = true
                    SparePartsPerKWh = 13

                    ThermalLoss = 0.15
                    TempOverheat = 435
                    TempRunaway = 535
                    RunawayHeatFactor = 2

                    ChargeEfficiencyCurve
                    {
                        key = 0.0 0.80
                        key = 0.3 0.85
                        key = 0.6 0.90
                        key = 0.85 0.85
                        key = 1.0 0.80
                    }
                }
            }
        }

        SUBTYPE
        {
            name = SSB
            title = #LOC_RB_title_SSB
            descriptionSummary = #LOC_RB_descSum_SSB
            descriptionDetail = #LOC_RB_descDet_SSB
            tankType = SSB
            upgradeRequired = RB_UpgradeSSB
            defaultSubtypePriority = 12
            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_short_SSB

                    FixedOutput = false
                    KeepWarm = false
                    SelfRunaway = false

                    HighEClevel = 0.95
                    Crate = 2

                    SelfDischargeRate = 0.003
                    CycleDurability = 10000
                    EvaRefurbishEnabled = true
                    SparePartsPerKWh = 2

                    ThermalLoss = 0.05
                    TempOverheat = 470
                    TempRunaway = 570
                    RunawayHeatFactor = 90

                    ChargeEfficiencyCurve
                    {
                        key = 0.0 0.90
                        key = 0.2 0.95
                        key = 0.8 0.95
                        key = 1.0 0.90
                    }
                }
            }
        }

        SUBTYPE
        {
            name = NukeCell
            title = #LOC_RB_short_Nuke
            descriptionSummary = #LOC_RB_descSum_Nuke
            descriptionDetail = #LOC_RB_descDet_Nuke
            tankType = NukeCell
            upgradeRequired = RB_UpgradeNuke
            defaultSubtypePriority = 1
            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_short_Nuke

                    FixedOutput = false
                    KeepWarm = false
                    SelfRunaway = true

                    HighEClevel = 2
                    Crate = 0.001

                    SelfDischargeRate = 0.0001            
                    CycleDurability = 1
                    EvaRefurbishEnabled = false
                    SparePartsPerKWh = 2

                    ThermalLoss = 0.12
                    TempOverheat = 1500
                    TempRunaway = 2500
                    RunawayHeatFactor = 750

                    ChargeEfficiencyCurve
                    {
                        key = 0.0 0.0
                        key = 1.0 0.0
                    }
                }
            }
        }
    }
}

@PART[battery-0625]:NEEDS[NearFutureElectrical] //B-3K
{
    RBbaseVolume = #$/RESOURCE[ElectricCharge]/maxAmount$
    @RBbaseVolume *= 0.3

    @mass = 0
    @cost = 0
    
    @RESOURCE[ElectricCharge]
    {
        @maxAmount = #$../RBbaseVolume$
        @maxAmount *= 0.3
        @amount = #$../RBbaseVolume$
        @amount *= 0.3
    }
    RESOURCE
    {
        name = StoredCharge
        maxAmount = #$../RBbaseVolume$
        @maxAmount *= 0.02
        amount = #$../RBbaseVolume$
        @amount *= 0.02
    }

    MODULE
    {
        name = RealBattery
        BatteryTypeDisplayName = #LOC_RB_short_PbAc
        Crate = 0.2
        HighEClevel = 0.95
        LowEClevel = 0.90
    }

    MODULE
    {
        name = ModuleB9PartSwitch
        moduleID = batterySwitch
        switcherDescription = #LOC_RB_batterySwitcherDescription
		switcherDescriptionPlural = #LOC_RB_batterySwitcherDescriptionPlural
        baseVolume = #$../RBbaseVolume$

        SUBTYPE
        {
            name = PbAc
            title = #LOC_RB_title_PbAc
            descriptionSummary = #LOC_RB_descSum_PbAc
            descriptionDetail = #LOC_RB_descDet_PbAc
            tankType = PbAc
            defaultSubtypePriority = 3

            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_short_PbAc
                    KeepWarm = false
                    SelfRunaway = false

                    HighEClevel = 0.95
                    Crate = 0.2

                    SelfDischargeRate = 0.045
                    CycleDurability = 75

                    ThermalLoss = 0.3
                    TempOverheat = 390
                    TempRunaway = 490
                    RunawayHeatFactor = 0.8

                    ChargeEfficiencyCurve
                    {
                        key = 0.0 0.55
                        key = 0.3 0.65
                        key = 0.5 0.70
                        key = 0.8 0.60
                        key = 1.0 0.50
                    }
                }
            }
        }

        SUBTYPE
        {
            name = NiCd
            title = #LOC_RB_title_NiCd
            descriptionSummary = #LOC_RB_descSum_NiCd
            descriptionDetail = #LOC_RB_descDet_NiCd
            tankType = NiCd
            upgradeRequired = RB_UpgradeNiCd
            defaultSubtypePriority = 4
            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_short_NiCd
                    KeepWarm = false
                    SelfRunaway = false

                    HighEClevel = 0.95
                    Crate = 0.5

                    SelfDischargeRate = 0.03
                    CycleDurability = 500

                    ThermalLoss = 0.2
                    TempOverheat = 340
                    TempRunaway = 440
                    RunawayHeatFactor = 1

                    ChargeEfficiencyCurve
                    {
                        key = 0.0 0.70
                        key = 0.5 0.75
                        key = 0.9 0.80
                        key = 1.0 0.65
                    }
                }
            }
        }

        SUBTYPE
        {
            name = RBZebra
            title = #LOC_RB_title_Zebra
            descriptionSummary = #LOC_RB_descSum_Zebra
            descriptionDetail = #LOC_RB_descDet_Zebra
            tankType = RBZebra
            upgradeRequired = RB_UpgradeZebra
            defaultSubtypePriority = 8
            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_short_Zebra
                    KeepWarm = true
                    SelfRunaway = false
                    
                    HighEClevel = 0.95
                    Crate = 1

                    SelfDischargeRate = 0
                    CycleDurability = 4500

                    ThermalLoss = 0.1
                    TempOverheat = 1000
                    TempRunaway = 9999
                    RunawayHeatFactor = 0

                    ChargeEfficiencyCurve
                    {
                            key = 0.0 0.85
                            key = 0.3 0.90
                            key = 0.5 0.90
                            key = 0.8 0.85
                            key = 1.0 0.80
                    }
                }
            }
        }

        SUBTYPE
        {
            name = Li_ion
            title = #LOC_RB_title_Li_ion
            descriptionSummary = #LOC_RB_descSum_Li_ion
            descriptionDetail = #LOC_RB_descDet_Li_ion
            tankType = Li_ion
            upgradeRequired = RB_UpgradeLiIon
            defaultSubtypePriority = 9
            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_short_Li_ion
                    KeepWarm = false
                    SelfRunaway = false

                    HighEClevel = 0.95
                    Crate = 1

                    SelfDischargeRate = 0.01
                    CycleDurability = 1000

                    ThermalLoss = 0.15
                    TempOverheat = 435
                    TempRunaway = 535
                    RunawayHeatFactor = 2

                    ChargeEfficiencyCurve
                    {
                        key = 0.0 0.80
                        key = 0.3 0.85
                        key = 0.6 0.90
                        key = 0.85 0.85
                        key = 1.0 0.80
                    }
                }
            }
        }

        SUBTYPE
        {
            name = SSB
            title = #LOC_RB_title_SSB
            descriptionSummary = #LOC_RB_descSum_SSB
            descriptionDetail = #LOC_RB_descDet_SSB
            tankType = SSB
            upgradeRequired = RB_UpgradeSSB
            defaultSubtypePriority = 12
            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_short_SSB
                    KeepWarm = false
                    SelfRunaway = false

                    HighEClevel = 0.95
                    Crate = 2

                    SelfDischargeRate = 0.003
                    CycleDurability = 10000

                    ThermalLoss = 0.05
                    TempOverheat = 470
                    TempRunaway = 570
                    RunawayHeatFactor = 90

                    ChargeEfficiencyCurve
                    {
                        key = 0.0 0.90
                        key = 0.2 0.95
                        key = 0.8 0.95
                        key = 1.0 0.90
                    }
                }
            }
        }

        SUBTYPE
        {
            name = NukeCell
            title = #LOC_RB_short_Nuke
            descriptionSummary = #LOC_RB_descSum_Nuke
            descriptionDetail = #LOC_RB_descDet_Nuke
            tankType = NukeCell
            upgradeRequired = RB_UpgradeNuke
            defaultSubtypePriority = 1
            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_short_Nuke

                    FixedOutput = false
                    KeepWarm = false
                    SelfRunaway = true

                    HighEClevel = 2
                    Crate = 0.001

                    SelfDischargeRate = 0.0001            
                    CycleDurability = 1

                    ThermalLoss = 0.12
                    TempOverheat = 1500
                    TempRunaway = 2500
                    RunawayHeatFactor = 750

                    ChargeEfficiencyCurve
                    {
                        key = 0.0 0.0
                        key = 1.0 0.0
                    }
                }
            }
        }
    }
}

@PART[battery-125,battery-25]:NEEDS[NearFutureElectrical] //B-6K & B-12K
{
    RBbaseVolume = #$/RESOURCE[ElectricCharge]/maxAmount$
    @RBbaseVolume *= 0.3

    @mass = 0
    @cost = 0
    
    @RESOURCE[ElectricCharge]
    {
        @maxAmount = #$../RBbaseVolume$
        @maxAmount *= 0.8
        @amount = #$../RBbaseVolume$
        @amount *= 0.8
    }
    RESOURCE
    {
        name = StoredCharge
        maxAmount = #$../RBbaseVolume$
        @maxAmount *= 0.2
        amount = #$../RBbaseVolume$
        @amount *= 0.2
    }

    MODULE
    {
        name = RealBattery
        BatteryTypeDisplayName = #LOC_RB_short_Li_ion
        Crate = 1
        HighEClevel = 0.95
        LowEClevel = 0.90
    }

    MODULE
    {
        name = ModuleB9PartSwitch
        moduleID = batterySwitch
        switcherDescription = #LOC_RB_batterySwitcherDescription
        switcherDescriptionPlural = #LOC_RB_batterySwitcherDescriptionPlural
        baseVolume = #$../RBbaseVolume$
        
        SUBTYPE
        {
            name = RBZebra
            title = #LOC_RB_title_Zebra
            descriptionSummary = #LOC_RB_descSum_Zebra
            descriptionDetail = #LOC_RB_descDet_Zebra
            tankType = RBZebra
            upgradeRequired = RB_UpgradeZebra
            defaultSubtypePriority = 8
            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_short_Zebra
                    KeepWarm = true
                    SelfRunaway = false
                    
                    HighEClevel = 0.95
                    Crate = 1

                    SelfDischargeRate = 0
                    CycleDurability = 4500

                    ThermalLoss = 0.1
                    TempOverheat = 1000
                    TempRunaway = 9999
                    RunawayHeatFactor = 0

                    ChargeEfficiencyCurve
                    {
                            key = 0.0 0.85
                            key = 0.3 0.90
                            key = 0.5 0.90
                            key = 0.8 0.85
                            key = 1.0 0.80
                    }
                }
            }
        }

        SUBTYPE
        {
            name = Li_ion
            title = #LOC_RB_title_Li_ion
            descriptionSummary = #LOC_RB_descSum_Li_ion
            descriptionDetail = #LOC_RB_descDet_Li_ion
            tankType = Li_ion
            //upgradeRequired = RB_UpgradeLiIon
            defaultSubtypePriority = 9
            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_short_Li_ion
                    KeepWarm = false
                    SelfRunaway = false

                    HighEClevel = 0.95
                    Crate = 1

                    SelfDischargeRate = 0.01
                    CycleDurability = 1000

                    ThermalLoss = 0.15
                    TempOverheat = 435
                    TempRunaway = 535
                    RunawayHeatFactor = 2

                    ChargeEfficiencyCurve
                    {
                        key = 0.0 0.80
                        key = 0.3 0.85
                        key = 0.6 0.90
                        key = 0.85 0.85
                        key = 1.0 0.80
                    }
                }
            }
        }

        SUBTYPE
        {
            name = SSB
            title = #LOC_RB_title_SSB
            descriptionSummary = #LOC_RB_descSum_SSB
            descriptionDetail = #LOC_RB_descDet_SSB
            tankType = SSB
            upgradeRequired = RB_UpgradeSSB
            defaultSubtypePriority = 12
            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_short_SSB
                    KeepWarm = false
                    SelfRunaway = false

                    HighEClevel = 0.95
                    Crate = 2

                    SelfDischargeRate = 0.003
                    CycleDurability = 10000

                    ThermalLoss = 0.05
                    TempOverheat = 470
                    TempRunaway = 570
                    RunawayHeatFactor = 90

                    ChargeEfficiencyCurve
                    {
                        key = 0.0 0.90
                        key = 0.2 0.95
                        key = 0.8 0.95
                        key = 1.0 0.90
                    }
                }
            }
        }
    }
}

@PART[nfex-battery-mini-1]:NEEDS[NearFutureExploration] //Z-25
{
    RBbaseVolume = #$/RESOURCE[ElectricCharge]/maxAmount$
    @RBbaseVolume *= 0.3

    @RESOURCE[ElectricCharge]
    {
        @maxAmount = #$../RBbaseVolume$
        @maxAmount *= 0.25
        @amount = #$../RBbaseVolume$
        @amount *= 0.25
    }
    RESOURCE
    {
        name = StoredCharge
        maxAmount = #$../RBbaseVolume$
        @maxAmount *= 0.05
        amount = #$../RBbaseVolume$
        @amount *= 0.05
    }

    MODULE
    {
        name = RealBattery
        BatteryTypeDisplayName = #LOC_RB_short_NiCd
        Crate = 0.5
        HighEClevel = 0.95
        LowEClevel = 0.90
    }

    MODULE
    {
        name = ModuleB9PartSwitch
        moduleID = batterySwitch
        switcherDescription = #LOC_RB_batterySwitcherDescription
        switcherDescriptionPlural = #LOC_RB_batterySwitcherDescriptionPlural
        baseVolume = #$../RBbaseVolume$

        SUBTYPE
        {
            name = NiCd
            title = #LOC_RB_title_NiCd
            descriptionSummary = #LOC_RB_descSum_NiCd
            descriptionDetail = #LOC_RB_descDet_NiCd
            tankType = NiCd
            defaultSubtypePriority = 4
            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_short_NiCd

                    Crate = 0.5

                    SelfDischargeRate = 0.03
                    CycleDurability = 500

                    ThermalLoss = 0.2
                    TempOverheat = 340
                    TempRunaway = 440
                    RunawayHeatFactor = 1

                    ChargeEfficiencyCurve
                    {
                        key = 0.0 0.70
                        key = 0.5 0.75
                        key = 0.9 0.80
                        key = 1.0 0.65
                    }
                }
            }
        }

        SUBTYPE
        {
            name = AgZn
            title = #LOC_RB_title_AgZn
            descriptionSummary = #LOC_RB_descSum_AgZn
            descriptionDetail = #LOC_RB_descDet_AgZn
            tankType = AgZn
            upgradeRequired = RB_UpgradeAgZn
            defaultSubtypePriority = 6
            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_short_AgZn

                    HighEClevel = 0.95
                    Crate = 1.5

                    SelfDischargeRate = 0.025
                    CycleDurability = 50

                    ThermalLoss = 0.3
                    TempOverheat = 370
                    TempRunaway = 470
                    RunawayHeatFactor = 1.6

                    ChargeEfficiencyCurve
                    {
                        key = 0.0 0.60
                        key = 0.3 0.75
                        key = 0.6 0.85
                        key = 0.85 0.70
                        key = 1.0 0.50
                    }
                }
            }
        }

        SUBTYPE
        {
            name = Li_poly
            title = #LOC_RB_title_Li_poly
            descriptionSummary = #LOC_RB_descSum_Li_poly
            descriptionDetail = #LOC_RB_descDet_Li_poly
            tankType = Li_poly
            upgradeRequired = RB_UpgradeLiPoly
            defaultSubtypePriority = 10
            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_short_Li_poly

                    Crate = 3

                    SelfDischargeRate = 0.015
                    CycleDurability = 600

                    ThermalLoss = 0.25
                    TempOverheat = 420
                    TempRunaway = 470
                    RunawayHeatFactor = 2.2

                    ChargeEfficiencyCurve
                    {
                        key = 0.0 0.90
                        key = 0.2 0.95
                        key = 0.8 0.95
                        key = 1.0 0.90
                    }
                }
            }
        }

        SUBTYPE
        {
            name = Graphene
            title = #LOC_RB_title_Graphene
            descriptionSummary = #LOC_RB_descSum_Graphene
            descriptionDetail = #LOC_RB_descDet_Graphene
            tankType = Graphene
            upgradeRequired = RB_UpgradeGraphene
            defaultSubtypePriority = 11
            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_title_Graphene

                    Crate = 5

                    SelfDischargeRate = 0.002
                    CycleDurability = 2500

                    ThermalLoss = 0.03
                    TempOverheat = 450
                    TempRunaway = 550
                    RunawayHeatFactor = 130

                    ChargeEfficiencyCurve
                    {
                        key = 0.0   0.90
                        key = 0.25  0.96
                        key = 0.5   0.97
                        key = 0.75  0.96
                        key = 1.0   0.92
                    }
                }
            }
        }
    }
}

@PART[nflv-battery-stack-5-1,nflv-battery-stack-75-1]:NEEDS[NearFutureLaunchVehicles] //Z-32K & Z-72K
{
    RBbaseVolume = #$/RESOURCE[ElectricCharge]/maxAmount$
    @RBbaseVolume *= 0.3

    @mass = 0
    @cost = 0
    
    @RESOURCE[ElectricCharge]
    {
        @maxAmount = #$../RBbaseVolume$
        @maxAmount *= 0.8
        @amount = #$../RBbaseVolume$
        @amount *= 0.8
    }
    RESOURCE
    {
        name = StoredCharge
        maxAmount = #$../RBbaseVolume$
        @maxAmount *= 0.2
        amount = #$../RBbaseVolume$
        @amount *= 0.2
    }

    MODULE
    {
        name = RealBattery
        BatteryTypeDisplayName = #LOC_RB_short_Li_ion
        Crate = 1
        HighEClevel = 0.95
        LowEClevel = 0.90
    }

    MODULE
    {
        name = ModuleB9PartSwitch
        moduleID = batterySwitch
        switcherDescription = #LOC_RB_batterySwitcherDescription
        switcherDescriptionPlural = #LOC_RB_batterySwitcherDescriptionPlural
        baseVolume = #$../RBbaseVolume$
        
        SUBTYPE
        {
            name = RBZebra
            title = #LOC_RB_title_Zebra
            descriptionSummary = #LOC_RB_descSum_Zebra
            descriptionDetail = #LOC_RB_descDet_Zebra
            tankType = RBZebra
            upgradeRequired = RB_UpgradeZebra
            defaultSubtypePriority = 8
            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_short_Zebra
                    KeepWarm = true
                    SelfRunaway = false
                    
                    HighEClevel = 0.95
                    Crate = 1

                    SelfDischargeRate = 0
                    CycleDurability = 4500

                    ThermalLoss = 0.1
                    TempOverheat = 1000
                    TempRunaway = 9999
                    RunawayHeatFactor = 0

                    ChargeEfficiencyCurve
                    {
                            key = 0.0 0.85
                            key = 0.3 0.90
                            key = 0.5 0.90
                            key = 0.8 0.85
                            key = 1.0 0.80
                    }
                }
            }
        }

        SUBTYPE
        {
            name = Li_ion
            title = #LOC_RB_title_Li_ion
            descriptionSummary = #LOC_RB_descSum_Li_ion
            descriptionDetail = #LOC_RB_descDet_Li_ion
            tankType = Li_ion
            //upgradeRequired = RB_UpgradeLiIon
            defaultSubtypePriority = 9
            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_short_Li_ion
                    KeepWarm = false
                    SelfRunaway = false

                    HighEClevel = 0.95
                    Crate = 1

                    SelfDischargeRate = 0.01
                    CycleDurability = 1000

                    ThermalLoss = 0.15
                    TempOverheat = 435
                    TempRunaway = 535
                    RunawayHeatFactor = 2

                    ChargeEfficiencyCurve
                    {
                        key = 0.0 0.80
                        key = 0.3 0.85
                        key = 0.6 0.90
                        key = 0.85 0.85
                        key = 1.0 0.80
                    }
                }
            }
        }

        SUBTYPE
        {
            name = SSB
            title = #LOC_RB_title_SSB
            descriptionSummary = #LOC_RB_descSum_SSB
            descriptionDetail = #LOC_RB_descDet_SSB
            tankType = SSB
            upgradeRequired = RB_UpgradeSSB
            defaultSubtypePriority = 12
            MODULE
            {
                IDENTIFIER
                {
                    name = RealBattery
                }
                DATA
                {
                    BatteryTypeDisplayName = #LOC_RB_short_SSB
                    KeepWarm = false
                    SelfRunaway = false

                    HighEClevel = 0.95
                    Crate = 2

                    SelfDischargeRate = 0.003
                    CycleDurability = 10000

                    ThermalLoss = 0.05
                    TempOverheat = 470
                    TempRunaway = 570
                    RunawayHeatFactor = 90

                    ChargeEfficiencyCurve
                    {
                        key = 0.0 0.90
                        key = 0.2 0.95
                        key = 0.8 0.95
                        key = 1.0 0.90
                    }
                }
            }
        }
    }
}